(()=>{function t(t,a){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=a){var n,i,o,r,c=[],s=!0,l=!1;try{if(o=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;s=!1}else for(;!(s=(n=o.call(a)).done)&&(c.push(n.value),c.length!==e);s=!0);}catch(t){l=!0,i=t}finally{try{if(!s&&null!=a.return&&(r=a.return(),Object(r)!==r))return}finally{if(l)throw i}}return c}}(t,a)||function(t,a){if(t){if("string"==typeof t)return e(t,a);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,a):void 0}}(t,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=Array(e);a<e;a++)n[a]=t[a];return n}var a=function(e){var a="#hcaptcha-message",n=e(a),i=e("#wpwrap"),o=e("#adminmenuwrap"),r=e("#hcaptcha-integrations-search"),c=e("#show_antispam_coverage_1");function s(t,a){n.removeClass(),n.addClass(a+" notice settings-error is-dismissible"),n.html("<p>".concat(t,"</p>")),e(document).trigger("wp-updates-notice-added");var r=n.clone();n.css("visibility","hidden"),r.css("margin","0px"),r.css("top",i.position().top),r.css("z-index","999999");var c="block"===o.css("display")?o.width():0;r.css("left",c),r.width(e(window).width()-c),r.css("position","fixed"),e("body").append(r),setTimeout(function(){n.css("visibility","unset"),r.remove()},3e3)}function l(t){s(t,"notice-success")}function h(t){s(t,"notice-error")}function d(t){return t.is(jQuery(".form-table").eq(1))}function u(t,a,n){if("theme"===a){var i=e(".form-table"),o=t?"":'[data-label="'+n+'"]',r=i.eq(t?1:2).find('.hcaptcha-integrations-logo img[data-entity="theme"]'+o);if(r.length){var c=i.eq(t?2:1),s=r.closest("tr");g(c,r.attr("data-label"),s)}}}function g(t,a,n){var i=!1,o=a.toLowerCase(),r=!d(t),c=n.find("fieldset");c.attr("disabled",r),c.find("input").attr("disabled",r),t.find("tbody").children().each(function(t,a){var r=e(a).find(".hcaptcha-integrations-logo img").attr("alt");if((r=(r=r||"").replace(" Logo","")).toLowerCase()>o)return n.insertBefore(e(a)),i=!0,!1}),i||t.find("tbody").append(n)}function f(){var t=c.prop("checked");e("label[data-antispam]").each(function(){var a=function(t){var a=t.next(".helper");return a.length||(a=e(document.createElement("span")).addClass("helper"),t.after(a)),function(){var n,i;a.find('i[class^="antispam"]').remove();for(var o=null!==(n=null===(i=t.get(0))||void 0===i?void 0:i.attributes)&&void 0!==n?n:[],r=[],c=0;c<o.length;c++){var s=o[c].name;if(0===s.indexOf("data-antispam-")){var l=s.replace(/^data-/,"");-1===r.indexOf(l)&&r.push(l)}}r.forEach(function(t){var n=e(document.createElement("i")).addClass(t);a.prepend(n)})}(),a}(e(this));t?a.css("display","inline-flex"):a.hide()})}"undefined"!=typeof jest&&(window.__integrationsTest={swapThemes:u}),c.on("change",function(){f()}),e(".form-table img").on("click",function(i){function o(){r(!0)}function r(){var a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=v?"on":"off";n=a?"install":n;var i,o,r=(o=document.querySelector(".kagg-dialog select"))&&null!==(i=o.value)&&void 0!==i?i:"",c={action:HCaptchaIntegrationsObject.action,nonce:HCaptchaIntegrationsObject.nonce,install:a,activate:v,entity:f,status:C,newTheme:r};b.addClass(n),e.post({url:HCaptchaIntegrationsObject.ajaxUrl,data:c}).done(function(a){if(void 0!==a.success)if(void 0!==a.data.themes&&(HCaptchaIntegrationsObject.themes=a.data.themes,HCaptchaIntegrationsObject.defaultTheme=a.data.defaultTheme),a.success){var n=e(".form-table").eq(v?1:2);u(v,f,r),g(n,p,b),l(a.data.message),function(a){for(var n=e(".form-table"),i=0,o=Object.entries(a);i<o.length;i++){var r=t(o[i],2),c=r[0],s=r[1];if("1"!==c){var l="hcaptcha-integrations-"+c.replace(/_/g,"-"),h=e("tr.".concat(l)),u=h.find(".hcaptcha-integrations-logo"),f=d(h.closest(".form-table"));s&&u.attr("data-installed",!0),f!==s&&g(n.eq(s?1:2),u.find("img").attr("alt"),h)}}}(a.data.stati),e("html, body").animate({scrollTop:b.offset().top-hCaptchaSettingsBase.getStickyHeight()},1e3)}else{var i,o;h(null!==(i=null===(o=a.data)||void 0===o?void 0:o.message)&&void 0!==i?i:a.data)}else s(HCaptchaIntegrationsObject.unexpectedErrorMsg,"notice-error")}).fail(function(t){h(t.statusText)}).always(function(){b.removeClass("install on off")})}i.preventDefault(),n.remove(),e('<div id="hcaptcha-message"></div>').insertAfter(".hcaptcha-header-bar"),n=e(a);var c=e(i.target),f=c.data("entity");if(f=f||"",-1!==e.inArray(f,["core","theme","plugin"])&&-1===e.inArray(f,["core"])){var p=c.attr("alt");p=(p=p||"").replace(" Logo","");var m,v,b=c.closest("tr"),y=b.attr("class").match(/hcaptcha-integrations-([a-z0-9-]+)/),C=y?y[1]:"",O="";if(b.find("fieldset").attr("disabled"))m="plugin"===f?HCaptchaIntegrationsObject.activatePluginMsg:HCaptchaIntegrationsObject.activateThemeMsg,v=!0;else{if("plugin"===f)m=HCaptchaIntegrationsObject.deactivatePluginMsg;else{for(var j in m=HCaptchaIntegrationsObject.deactivateThemeMsg,O="<p>"+HCaptchaIntegrationsObject.selectThemeMsg+"</p>",O+="<select>",HCaptchaIntegrationsObject.themes){var I=j===HCaptchaIntegrationsObject.defaultTheme?' selected="selected"':"";O+='<option value="'.concat(j,'"').concat(I,">").concat(HCaptchaIntegrationsObject.themes[j],"</option>")}O+="</select>"}v=!1}if(-1===e.inArray(f,["theme"])||v||0!==Object.keys(HCaptchaIntegrationsObject.themes).length){if("false"===b.find(".hcaptcha-integrations-logo").attr("data-installed"))return i.ctrlKey?void o():(m=(m="plugin"===f?HCaptchaIntegrationsObject.installPluginMsg:HCaptchaIntegrationsObject.installThemeMsg).replace("%s",p),void kaggDialog.confirm({title:m,content:O,type:"install",buttons:{ok:{text:HCaptchaIntegrationsObject.OKBtnText},cancel:{text:HCaptchaIntegrationsObject.CancelBtnText}},onAction:function(t){t&&o()}}));i.ctrlKey?r():(m=m.replace("%s",p),kaggDialog.confirm({title:m,content:O,type:v?"activate":"deactivate",buttons:{ok:{text:HCaptchaIntegrationsObject.OKBtnText},cancel:{text:HCaptchaIntegrationsObject.CancelBtnText}},onAction:function(t){t&&r()}}))}else kaggDialog.confirm({title:HCaptchaIntegrationsObject.onlyOneThemeMsg,content:"",type:"info",buttons:{ok:{text:HCaptchaIntegrationsObject.OKBtnText}}})}});var p,m,v;r.on("input",(p=function(){var t=r.val().trim().toLowerCase(),a=e(".hcaptcha-integrations-logo img"),n=null;if(a.each(function(a,i){var o=e(i);if("core"!==o.data("entity")){var r=o.closest("tr");o.data("label").toLowerCase().includes(t)?(r.show(),n=null!=n?n:r):r.hide()}}),n){var i=n.offset().top+n.outerHeight()-e(window).height()+5;e("html").stop().animate({scrollTop:i},1e3)}},m=100,function(){var t=this,e=arguments;clearTimeout(v),v=setTimeout(function(){return p.apply(t,e)},m)})),e("#hcaptcha-options").keydown(function(t){e(t.target).is(r)&&13===t.which&&t.preventDefault()}),f(),function(){if(HCaptchaIntegrationsObject.suggestActivate){var t=document.querySelector("tr.hcaptcha-integrations-".concat(HCaptchaIntegrationsObject.suggestActivate," .hcaptcha-integrations-logo").replace(/_/g,"-"));t&&(hCaptchaSettingsBase.highlightElement(t),l(HCaptchaIntegrationsObject.suggestActivateMsg))}}()};window.hCaptchaIntegrations=a,jQuery(document).ready(a)})();