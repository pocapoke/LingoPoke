(()=>{var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var a=function(a){var n="#hcaptcha-message",c=a(n),o=a("form.hcaptcha-general"),r=a('[name="hcaptcha_settings[site_key]"]'),i=a('[name="hcaptcha_settings[secret_key]"]'),s=a("#hcaptcha-options .h-captcha"),l=a("#check_config"),h=a("#reset_notifications"),p=a('[name="hcaptcha_settings[theme]"]'),d=a('[name="hcaptcha_settings[size]"]'),u=a('[name="hcaptcha_settings[language]"]'),f=a('[name="hcaptcha_settings[mode]"]'),v=a('[name="hcaptcha_settings[custom_themes][]"]'),m=a(".hcaptcha-general-custom-prop select"),g=a(".hcaptcha-general-custom-value input"),b=a('[name="hcaptcha_settings[config_params]"]'),y=a(".hcaptcha-section-enterprise + table input"),C=a('[name="hcaptcha_settings[recaptcha_compat_off][]"]'),j=a('[name="hcaptcha_settings[antispam_provider]"]'),H=a("#blacklisted_ips"),O=a("#whitelisted_ips"),k=o.find("#submit"),_={},w="#ffabaf",G="hcaptcha-loading",S=r.val(),A=i.val(),T=U();_[HCaptchaGeneralObject.modeLive]=HCaptchaGeneralObject.siteKey,_[HCaptchaGeneralObject.modeTestPublisher]=HCaptchaGeneralObject.modeTestPublisherSiteKey,_[HCaptchaGeneralObject.modeTestEnterpriseSafeEndUser]=HCaptchaGeneralObject.modeTestEnterpriseSafeEndUserSiteKey,_[HCaptchaGeneralObject.modeTestEnterpriseBotDetected]=HCaptchaGeneralObject.modeTestEnterpriseBotDetectedSiteKey;var x=!1,E=!1,N=[];function P(){N=[];var e=console.log,t=console.warn,a=console.info,n=console.error,c=console.clear;console.log=function(t){N.push(["Console log:",arguments]),e.apply(console,arguments)},console.warn=function(e){N.push(["Console warn:",arguments]),t.apply(console,arguments)},console.info=function(e){N.push(["Console info:",arguments]),a.apply(console,arguments)},console.error=function(e){N.push(["Console error:",arguments]),n.apply(console,arguments)},console.clear=function(){N=[],c()}}function L(){for(var e=["recaptchacompat disabled","Missing sitekey - https://docs.hcaptcha.com/configuration#javascript-api"],t=[],a=0;a<N.length;a++){for(var n=N[a],c=n[0],o=n[1],r=Object.keys(o),i=[],s=0;s<r.length;s++){var l=o[s];"string"==typeof l&&-1===e.indexOf(l)&&i.push([c,l].join(" "))}t.push(i.join("\n"))}return N=[],t.join("\n")}function B(e){var t={};return e.each(function(){var e=a(this),n=e.attr("name").replace(/hcaptcha_settings\[(.+)]/,"$1");t[n]=e.val()}),t}function U(){return B(y)}function K(){c.remove(),a('<div id="hcaptcha-message"></div>').insertAfter(".hcaptcha-header-bar"),c=a(n)}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e=void 0===e?"":String(e),e=(e+="\n"+L()).trim()){c.removeClass(),c.addClass(t+" notice is-dismissible");var n=e.split("\n").map(function(e){return"<p>".concat(e,"</p>")});c.html(n.join("")),a(document).trigger("wp-updates-notice-added"),a("html, body").animate({scrollTop:c.offset().top-hCaptchaSettingsBase.getStickyHeight()},1e3)}}function J(){D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","notice-success")}function I(){D(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"","notice-error")}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({},hCaptcha.getParams(),e),n=v.prop("checked"),c="live"===f.val();for(var o in n&&c?s.attr("data-theme","custom"):s.attr("data-theme",p.val()),n&&"object"===t(e.theme)||!n&&"object"!==t(e.theme)?a.theme=e.theme:a.theme=hCaptcha.getParams().theme,hCaptcha.setParams(a),s.html(""),e)"object"!==t(e[o])&&s.attr("data-".concat(o),"".concat(e[o]));hCaptcha.bindEvents()}function R(e,a){var n=function(e){return e&&"object"===t(e)};return n(e)&&n(a)?(Object.keys(a).forEach(function(t){var c=e[t],o=a[t];Array.isArray(c)&&Array.isArray(o)?e[t]=c.concat(o):n(c)&&n(o)?e[t]=R(Object.assign({},c),o):e[t]=o}),e):a}function M(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var n in e){var c=a?"".concat(a,"--").concat(n):n;if("object"===t(e[n])&&null!==e[n])M(e[n],c);else{var o=e[n],r=c.replace(/theme--/g,""),i="".concat(r,"=").concat(o),s=m.find('option[value*="'.concat(r,'="]'));1===s.length&&(s.attr("value",i),s.is(":selected")&&g.val(o))}}}function $(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=b.val().trim();a=a||null;try{e=JSON.parse(a)}catch(e){return b.css("background-color",w),k.attr("disabled",!0),void I(HCaptchaGeneralObject.badJSONError)}k.attr("disabled",!1),e=R(e,t),b.val(JSON.stringify(e,null,2)),M(e),v.prop("checked")||(e={sitekey:r.val(),theme:p.val(),size:d.val(),hl:u.val()}),z(e)}function F(){r.val()===S&&i.val()===A?(x=!1,K(),k.attr("disabled",!1)):x||(x=!0,I(HCaptchaGeneralObject.checkConfigNotice),k.attr("disabled",!0))}function Q(e,t){t?e.prop("disabled",!1).attr("readonly",!0).attr("aria-disabled","true").on("keydown.hcaptchaHelper paste.hcaptchaHelper drop.hcaptchaHelper",function(e){return e.preventDefault()}):e.removeAttr("readonly").removeAttr("aria-disabled").off("keydown.hcaptchaHelper paste.hcaptchaHelper drop.hcaptchaHelper")}function q(e){var t=f.val();_.hasOwnProperty(t)&&(t===HCaptchaGeneralObject.modeLive?(Q(r,!1),Q(i,!1)):(Q(r,!0),Q(i,!0)),void 0!==e&&z({sitekey:_[t]}))}function V(e){return e=e.replace(/(http|https):\/\//,""),"https://"+new URL("https://"+e).host}function W(){var e=j.val(),t=j.closest("tr");if(t.find("div").remove(),-1===HCaptchaGeneralObject.configuredAntiSpamProviders.indexOf(e)){var a=HCaptchaGeneralObject.configuredAntiSpamProviderError,n=j.find("option:selected").text();a=a.replace("%1$s",n),t.append("<div>".concat(a,"</div>"))}}P(),W(),q(),a("#site_key, #secret_key").on("click.hcaptchaHelper",function(){var e=a(this);if(e.is("[readonly]")||"true"===e.attr("aria-disabled")){var t=e.parent(),n=t.find("span.helper").first(),c=t.find("span.helper-content").first();n.css("display","block"),c.css("display","block"),hCaptchaSettingsBase.highlightElement(f[0]);var o=function(){n.css("display","none"),c.css("display","none"),a(document).off("mousedown.hcaptchaHelper",o)};a(document).on("mousedown.hcaptchaHelper",o)}}).on("keydown.hcaptchaHelper paste.hcaptchaHelper drop.hcaptchaHelper",function(e){var t=a(e.currentTarget);(t.is("[readonly]")||"true"===t.attr("aria-disabled"))&&e.preventDefault()}),"undefined"!=typeof jest&&(window.__generalTest={getCleanConsoleLogs:L,interceptConsoleLogs:P}),document.addEventListener("hCaptchaLoaded",function(){I()}),l.on("click",function(e){e.preventDefault(),""!==a('.hcaptcha-general-sample-hcaptcha textarea[name="h-captcha-response"]').val()?function(){K(),k.attr("disabled",!0);var e={action:HCaptchaGeneralObject.checkConfigAction,nonce:HCaptchaGeneralObject.checkConfigNonce,mode:f.val(),siteKey:r.val(),secretKey:i.val(),"h-captcha-response":a('textarea[name="h-captcha-response"]').val(),"hcaptcha-widget-id":a('input[name="hcaptcha-widget-id"]').val()};a.post({url:HCaptchaGeneralObject.ajaxUrl,data:e,beforeSend:function(){return J(HCaptchaGeneralObject.checkingConfigMsg)}}).done(function(e){e.success?(S=r.val(),A=i.val(),T=B(y),E=!1,J(e.data),k.attr("disabled",!1)):I(e.data)}).fail(function(e){I(e.statusText)}).always(function(){z()})}():kaggDialog.confirm({title:HCaptchaGeneralObject.completeHCaptchaTitle,content:HCaptchaGeneralObject.completeHCaptchaContent,type:"info",buttons:{ok:{text:HCaptchaGeneralObject.OKBtnText}},onAction:function(){return window.hCaptchaBindEvents()}})}),r.on("change",function(e){z({sitekey:a(e.target).val()}),F()}),i.on("change",function(){F()}),p.on("change",function(e){z({theme:a(e.target).val()})}),d.on("change",function(e){var t=a("#hcaptcha-invisible-notice"),n=a(e.target).val();"invisible"===n?t.show():t.hide(),z({size:n})}),u.on("change",function(e){z({hl:a(e.target).val()})}),f.on("change",q),v.on("change",function(){$()}),b.on("blur",function(){$()}),b.on("focus",function(){b.css("background-color","unset")}),y.on("change",function(){!function(){var t={onload:"hCaptchaOnLoad",render:"explicit"};C.prop("checked")&&(t.recaptchacompat="off"),v.prop("checked")&&(t.custom="true");var a={asset_host:"assethost",endpoint:"endpoint",host:"host",image_host:"imghost",report_api:"reportapi",sentry:"sentry"},n=U();for(var c in a){var o=n[c].trim();o&&(t[a[c]]=encodeURIComponent(V(o)))}var r=n.api_host.trim();r=V(r=r||"js.hcaptcha.com")+"/1/api.js";var i=new URL(r);for(var l in t)i.searchParams.append(l,t[l]);document.getElementById("hcaptcha-api").remove(),delete e.g.hcaptcha,s.html("");var h=document.getElementsByTagName("head")[0],p=document.createElement("script");p.type="text/javascript",p.id="hcaptcha-api",p.src=i.href,h.appendChild(p)}(),JSON.stringify(U())===JSON.stringify(T)?(E=!1,K(),k.attr("disabled",!1)):E||(E=!0,I(HCaptchaGeneralObject.checkConfigNotice),k.attr("disabled",!0))}),a(".hcaptcha-general h3").on("click",function(e){var t=a(e.currentTarget);t.toggleClass("closed");var n={action:HCaptchaGeneralObject.toggleSectionAction,nonce:HCaptchaGeneralObject.toggleSectionNonce,section:t.attr("class").replaceAll(/(hcaptcha-section-|closed)/g,"").trim(),status:!t.hasClass("closed")};a.post({url:HCaptchaGeneralObject.ajaxUrl,data:n}).done(function(e){e.success||I(e.data)}).fail(function(e){I(e.statusText)})}),l.removeAttr("name"),h.removeAttr("name"),m.removeAttr("name"),g.removeAttr("name"),m.find("option").each(function(){var e=a(this);e.val().split("=")[1]||e.attr("disabled",!0)}),g.val(""),m.on("change",function(){var e=a(this).find("option:selected").val().split("="),t=e[0],n=e[1];"palette--mode"===t?(g.attr("type","text"),g.val(n)):(g.val(n),g.attr("type","color"))}),g.on("change",function(e){var t=a(e.target).val(),n=m.find("option:selected"),c=n.val().split("="),o=c[0],r=t;n.val(o+"="+t),$(r=(o="theme--"+c[0]).split("--").reverse().reduce(function(e,t){var a={};return a[t]=e,a},r))}),j.on("change",function(e){W()}),H.add(O).on("blur",function(){!function(e){var t=e.val();if(""!==t.trim()){K(),k.attr("disabled",!0);var n={action:HCaptchaGeneralObject.checkIPsAction,nonce:HCaptchaGeneralObject.checkIPsNonce,ips:t};a.post({url:HCaptchaGeneralObject.ajaxUrl,data:n,beforeSend:function(){return e.parent().addClass(G)}}).done(function(t){if(!t.success)return e.css("background-color",w),void I(t.data);e.css("background-color",""),k.attr("disabled",!1)}).fail(function(e){I(e.statusText)}).always(function(){e.parent().removeClass(G)})}}(a(this))})};window.hCaptchaGeneral=a,jQuery(document).ready(a)})();