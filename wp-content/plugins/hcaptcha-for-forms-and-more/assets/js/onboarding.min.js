(()=>{var e=function(e){"use strict";var t,a=HCaptchaOnboardingObject,n={general:[1,2,3,4,5,6],integrations:[7,8]},o={1:{page:"general",selector:a.selectors.general.site_key},2:{page:"general",selector:a.selectors.general.mode},3:{page:"general",selector:a.selectors.general.check_config},4:{page:"general",selector:a.selectors.general.force},5:{page:"general",selector:a.selectors.general.antispam},6:{page:"general",selector:a.selectors.general.save},7:{page:"integrations",selector:a.selectors.integrations.integrations_list},8:{page:"integrations",selector:a.selectors.integrations.save}};function i(t){return e.post(a.ajaxUrl,{action:a.updateAction,nonce:a.updateNonce,value:t})}function c(e){var t=/step\s(\d+)/.exec(e||"");return t?parseInt(t[1],10):1}function r(e,t){return-1!==t.indexOf(e)}function s(t){var o=e('<div class="hcap-onb-panel" aria-live="polite"></div>'),c=e('<div class="hcap-onb-header"></div>'),s=e('<button type="button" class="hcap-onb-close" aria-label="'+a.i18n.close+'"></button>');s.on("click",function(){i("completed").always(function(){o.remove(),u()})});var p=e('<div class="hcap-onb-title"></div>');if(a.iconAnimatedUrl){var l=e('<img class="hcap-onb-icon" alt="" aria-hidden="true" src="'.concat(a.iconAnimatedUrl,'" />'));p.append(l)}p.append(e('<span class="hcap-onb-title-text"></span>').text(a.i18n.steps)),c.append(p).append(s);for(var d=e('<ol class="hcap-onb-list"></ol>'),h=1;h<=8;h++){var v=e("<li />").text(a.steps[h]).attr("data-step",h).attr("role","button").attr("tabindex","0").addClass("hcap-onb-step");"step "+h===t&&v.addClass("current"),r(h,n[a.page])||v.addClass("other-page"),d.append(v)}return o.append(c).append(d),e("body").append(o),o}function p(){var t=e('<div class="hcap-onb-modal-overlay" />'),n=e('<div class="hcap-onb-modal video" role="dialog" aria-modal="true" />'),o=e('<div class="hcap-onb-modal-head"></div>');o.append(e('<h2 class="hcap-onb-modal-title"></h2>').text(a.i18n.videoTitle));var i=function(e){try{var t=String(e||""),a="";return-1!==t.indexOf("youtu.be/")?a=t.split("youtu.be/")[1].split(/[?&#]/)[0]:-1!==t.indexOf("watch?v=")&&(a=t.split("watch?v=")[1].split(/[?&#]/)[0]),a?"https://www.youtube.com/embed/"+encodeURIComponent(a)+"?autoplay=1&rel=0":t}catch(t){return String(e||"")}}(a.videoUrl),c=e('<div class="hcap-onb-modal-body"></div>'),r=e('<div class="hcap-onb-video-wrap"></div>'),s=e('<iframe src="'.concat(i,'" title="YouTube video" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>'));r.append(s),c.append(r);var p=e('<div class="hcap-onb-modal-actions"></div>'),l=e('<button type="button" class="button button-primary hcap-onb-video-close"></button>').text(a.i18n.close);function d(){t.remove(),n.remove()}p.append(l),n.append(o,c,p),e("body").append(t,n),t.on("click",d),l.on("click",d),setTimeout(function(){try{l.trigger("focus")}catch(e){}},0)}function l(t){var n=e('<div class="hcap-onb-modal-overlay" />'),o=e('<div class="hcap-onb-modal" role="dialog" aria-modal="true" />'),i=document.createElement("div");i.className="hcap-onb-modal-head";var c=document.createElement("h2");c.className="hcap-onb-modal-title",c.appendChild(document.createTextNode(a.i18n.ratingTitle)),i.appendChild(c);var r=e(i),s=e('<div class="hcap-onb-modal-body"></div>').append(e("<p></p>").text(a.i18n.ratingBody)),p=e('<div class="hcap-onb-modal-actions"></div>'),l=e('<a class="button button-primary" target="_blank" rel="noopener noreferrer"></a>').text(a.i18n.ratingCta).attr("href",a.ratingUrl);function d(){n.remove(),o.remove(),"function"==typeof t&&t()}p.append(l),o.append(r,s,p),e("body").append(n,o),n.on("click",d),l.on("click",function(){setTimeout(d,0)}),setTimeout(function(){try{l.trigger("focus")}catch(e){}},0)}function d(){s(a.currentStep||"step 1"),h(1)}function u(){t&&(t.remove(),t=null),e(".hcap-onb-highlight").removeClass("hcap-onb-highlight")}function h(n){u();var r=o[n];if(r&&r.page===a.page){var s=e(r.selector).first();if(0!==s.length){try{var d=s.closest("table");if(d.length){var v=d.prevAll("h3").first();v.length&&v.hasClass("closed")&&v.trigger("click")}}catch(e){}try{var b=s.get(0);b&&"function"==typeof b.scrollIntoView&&b.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})}catch(e){}var g=e('<button type="button" class="button button-primary hcap-onb-done"></button>').text(a.i18n.done);g.on("click",function(){var t=function(e){return"step "+(c(e)+1)}("step "+n);if(6===n&&"general"===a.page)return a.currentStep=t,void i(t).always(function(){window.location.href=a.integrationsUrl});n>=8?i("completed").always(function(){l(function(){u(),e(".hcap-onb-panel").remove()})}):i(t).always(function(){a.currentStep=t,e(".hcap-onb-panel .hcap-onb-list li").removeClass("current").eq(n).addClass("current"),u(),h(n+1)})}),t=e('<div class="hcap-onb-tip" role="dialog"></div>');var f=a.steps[n];if(t.append(e('<div class="hcap-onb-tip-text"></div>').text(f)),1===n){var m=e("<div></div>").addClass("hcap-onb-tip-text"),y=e("<a></a>").attr("href","#").addClass("hcap-onb-video-link").text(a.i18n.videoCta);m.append(y),t.append(m),y.on("click",function(e){e.preventDefault(),p()}),y.on("keydown",function(e){"Enter"!==e.key&&" "!==e.key&&"Spacebar"!==e.key||(e.preventDefault(),p())})}t.append(g),e("body").append(t),setTimeout(function(){var a=s.offset(),n=t.outerWidth(),o=t.outerHeight(),i=e(window).width(),c=s.outerWidth(),r=s.outerHeight(),p=a.left+c+10,l=a.top-o/2+r/2,d=i-n-10;p>d&&(p=d),l<10&&(l=10),t.addClass("side-right").css({top:Math.round(l)+"px",left:Math.round(p)+"px"}),s.addClass("hcap-onb-highlight")},180)}}}e(window).on("resize.hcapOnb",function(){if(t){var e=c(a.currentStep||"step 1"),n=o[e];n&&n.page===a.page&&h(e)}});var v=a.currentStep||"step 1";function b(e){var t=r(e,n.general)?a.generalUrl:a.integrationsUrl,o=-1===t.indexOf("?")?"?":"&",i=a.stepParam;window.location.href=t+o+encodeURIComponent(i)+"="+encodeURIComponent(e)}e(document).off(".hcapOnbNav"),e(document).on("click.hcapOnbNav",".hcap-onb-list li.hcap-onb-step",function(t){t.preventDefault();var a=parseInt(e(this).attr("data-step"),10);a&&b(a)}),e(document).on("keydown.hcapOnbNav",".hcap-onb-list li.hcap-onb-step",function(t){if("Enter"===t.key||" "===t.key||"Spacebar"===t.key){t.preventDefault();var a=parseInt(e(this).attr("data-step"),10);a&&b(a)}}),e(document).on("keydown.hcapOnb",function(e){"Escape"===e.key&&u()});try{"general"===a.page&&7===c(a.currentStep||"")&&window.sessionStorage&&"1"===sessionStorage.getItem("hcapOnbGoIntegrations")&&(sessionStorage.removeItem("hcapOnbGoIntegrations"),window.location.href=a.integrationsUrl)}catch(e){}var g=c(v);if("general"!==a.page||1!==g){if(!n[a.page]||r(g,n[a.page])){s(v),h(g);var f=!1;e(document).on("submit","#hcaptcha-options",function(t){var n=c(a.currentStep||"step 1");if(6===n&&"general"===a.page){var o="step 7";a.currentStep=o,i(o);try{window.sessionStorage&&sessionStorage.setItem("hcapOnbGoIntegrations","1")}catch(e){}}else if(8===n&&"integrations"===a.page){if(f)return;t.preventDefault(),a.currentStep="completed",i("completed").always(function(){l(function(){f=!0;try{e("#hcaptcha-options").get(0).submit()}catch(t){e('#hcaptcha-options [type="submit"]').first().trigger("click")}})})}})}}else!function(){var t=e('<div class="hcap-onb-modal-overlay" />'),n=e('<div class="hcap-onb-modal" role="dialog" aria-modal="true" />'),o=e('<div class="hcap-onb-modal-head"></div>');a.iconAnimatedUrl&&o.append(e('<img class="hcap-onb-icon" alt="" aria-hidden="true" src="'.concat(a.iconAnimatedUrl,'" />'))),o.append(e('<h2 class="hcap-onb-modal-title"></h2>').text(a.i18n.welcomeTitle));var i=e('<div class="hcap-onb-modal-body"></div>').append(e("<p></p>").text(a.i18n.welcomeBody)),c=e('<div class="hcap-onb-modal-actions"></div>'),r=e('<button type="button" class="button button-primary hcap-onb-go"></button>').text(a.i18n.letsGo);function s(){t.remove(),n.remove()}c.append(r),n.append(o,i,c),e("body").append(t,n),t.on("click",function(){s(),d()}),r.on("click",function(){s(),d()}),setTimeout(function(){try{r.trigger("focus")}catch(e){}},0)}()};window.hCaptchaOnboarding=e,jQuery(document).ready(e)})();